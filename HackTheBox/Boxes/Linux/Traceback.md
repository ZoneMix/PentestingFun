---
tags: [HTB]
title: Traceback
created: '2020-05-12T17:19:04.368Z'
modified: '2020-05-12T17:32:12.664Z'
---

# Traceback
- Port 22 and 80 open
- Port 80 brings us to a hacked webpage
- Within the source of the page there is a note saying the hacker xh4a planted some webshells on there
- Hacker made a github page that we can scrape to use within gobuster
- Once we find the page for the webshell, view the source of the code and we see admin:admin as login
- Get in upload php reverse shell
- We get webadmin back on our machine and need to privesc to sysadmin
- Looking at .bash_history, we see that we can do sudo -l then run a luvit interpreter as sysadmin with a lua script
- we can make a lua script to pop a shell as sysadmin with os.execute("/bin/bash")
- once we get sysadmin there really is not lead, however using pspy64 we can see that there is a process that is made by root running every 30 seconds to backup the /etc/update-motd.d directory from the /var/backups/.update-motd.d/*
- Running LinEnum we see that process running
- using find we can do find / -group sysadmin 2>/dev/null | grep -v "proc" to see what we can access as a group
- that takes us to the update-motd.d folder
- we have rwx perms on the files in there but note we only have 30 seconds to do this
- reading about motd, it runs those files at login, so we can set up persistance with a pubkey in the .ssh of sysadmin because /etc/ssh/sshd_config has pubkey authentication
- so we can set up a login with ssh
- quickly we can plant a reverse shell inside of the 00-header file that allows us to login as root on the login of the system
- once we login we see we are root

