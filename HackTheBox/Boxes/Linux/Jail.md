---
tags: [HTB]
title: Jail
created: '2020-08-14T15:56:43.692Z'
modified: '2020-08-14T21:59:27.814Z'
---

# Jail
- on port 7411 there is some type of binary that is running that ask for a user and pass
- using directory medium lowercase, we are able to see the jailuser directory with the binary running and the source code with it. We have a buffer of 256 that gets copied into a buffer of 16
- using pwntools we can develop an exploit for this and deploy it
- once we have foothold, we have to then look into the nfsshare
- within the portscan there was a nfs share that was on 2094, we can use showmount to get the volumes
- looking at the volumes there is one that inaccessible
- mount -t nfs 10.10.10.34:/var/nfsshare var
- we can add a user, in our case frank, with the id 1000 because that is what it shows on that machine
- we need it to be frank so that we can privesc to him from nobody
- now that we are frank on our machine, we can create a setuid.c file to change the uid of the user that runs the file
- we can set a stickybit on it so that anyone can execute it, then once we execute it we are frank
- now to get adm, we have to priv esc by doing sudo -l
- we can run rvim
- :py import pty; import pty.spawn("/bin/bash") will give us adm
- once we are adm, there are files that are hidden in the adm directory
- we see a .keys directory with interesting files
- there is a keys.rar file that we will need to unrar, but it requires a password, we know this by first converting the contents of the file to base64 and copying it to our machine since netcat doesn't want to work
- once we have the file, we can look at some of the other files in the directory, the note.txt says the password format, then inside of .local, there is a .frank file that is encrypted.
- Using a tool called quipquip we can decrypt the contents to find that Frank Morris is one of the people who escaped alcatraz in 1962, so we can therefore guess the last character being Morris1962!
- now we get a root ssh key
- we can also possibly use rar2john and crack it using, john --format=rar --wordlist=something
- since we have a public authorized key, we can try using the RSACtfTool to crack the private key


