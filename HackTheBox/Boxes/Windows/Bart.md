---
attachments: [Clipboard_2020-09-03-00-12-54.png]
tags: [HTB]
title: Bart
created: '2020-09-03T02:22:15.218Z'
modified: '2020-09-03T05:12:54.662Z'
---

# Bart
- nmap port 80 is open
- due to dns resolution we have to change the hosts file to add the domains it is trying to reach, in our case forum.bart.htb and bart.htb
- we can run a gobuster scan, but due to dns resolution, we will need to look for redirects like 301,302 because of it


- gobuster
  - /forum, leads to forum.bart.htb
  - /monitor, leads to a php monitor server login

- possible users
  - h.potter@bart.htb
  - samantha brown (s.brown)
  - daniel simmons (d.simmons)
  - robert hilton (r.hilton)

- under the login, we can login with credentials harvey:potter
- going to the internal-01.bart.htb, there is a chat server login and we can brute force it with intruder
- the login is harvey:Password
- (note: could have looked at source code on github at register.php and just created an account, but i am a loser and suck)
- once you get in, you can get into the chat server, you can look into the source of the page to find the url for the log.php file, then we can just use lfi.
- if we replace the filename with an invalid file, we see it is grabbing the user-agent string within the log.php file
- so using burp, we can repeat, and replace it with a string of php to use system commands and get a reverse shell
```php
<?php system('command here');?>
```
- once we get netcat on the box and get a reverse shell, we can then use whoami /priv to see we have the SeImpersonatePrivilege
- systeminfo did reveal that it was vulnerable to some things but we can just use juicypotato
![](@attachment/Clipboard_2020-09-03-00-12-54.png)
